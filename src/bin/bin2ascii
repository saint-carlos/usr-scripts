#!/usr/bin/env bash

PROGRAM=$(basename $0)
DESCRIPTION="convert stdin of 1s and 0s from binary to ASCII"
PARAMS=""
OPTIONS="[-h]"

usage()
{
    [ $1 -ne 0 ] && exec >&2

    cat << EOF
$PROGRAM - $DESCRIPTION
usage:
$PROGRAM $OPTIONS $PARAMS

example:

echo 01100001 0110001001100011 | $PROGRAM
output: abc

any character other than 0 and 1 is ignored.

options:
-h	help: show this help message and exit.

exit status:
0	no usage error
2	if some arguments are bad
EOF

    exit $1
}

while getopts h OPTION; do
    case $OPTION in
        h) usage 0 ;;
        \?) usage 2 ;;
    esac
done
[ $# -eq 0 ] || usage 2

tr ' ' '\n' \
    | tr -cd '01\n' \
    | fold -b -w 8 \
    | awk '{ printf("%08u\n", $1) }' \
    | sed 's/^/0b/' \
    | xargs base -xp \
    | ascii -ax
