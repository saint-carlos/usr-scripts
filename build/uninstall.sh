#!/bin/bash -xe

remove_line()
{
	SEARCH_TERM="$1"
	FILE="$2"
	test -f "$FILE" || return 0
	if grep -v "$SEARCH_TERM" "$FILE" > "${FILE}.tmp"; then
		mv "$FILE.tmp" "$FILE"
	else
		rm -f "$FILE" "${FILE}.tmp"
	fi
}

[ $# -eq 1 ] || exit 1

PARAMS_FILE="$1"

. "${PARAMS_FILE}"

test -d "$ETC_PLACEHOLDER" && rm -r "$ETC_PLACEHOLDER"
test -d "$BIN_PLACEHOLDER" && rm -r "$BIN_PLACEHOLDER"
test -d "$SBIN_PLACEHOLDER" && rm -r "$SBIN_PLACEHOLDER"

remove_line "generated by $PROJECT" ~/.bashrc
remove_line "generated by $PROJECT" ~/.vimrc

